# 総勘定元帳の仕様

## 添付画像から読み取った仕様

### ヘッダー情報
- 事業所名: 発生株式会社
- 期間: 令和3年度 (2021/04/01 ~ 2022/03/31)
- 勘定科目: 売上高

### 表の構成

| 列名 | 説明 |
|------|------|
| 取引日 | 取引が発生した日付 |
| 相手勘定科目 | 借方または貸方の相手勘定科目 |
| 摘要 | 取引の内容説明 |
| 借方金額 | 借方の金額 |
| 貸方金額 | 貸方の金額 |
| 残高 | 取引後の残高 |

### 表示内容の特徴

1. **月ごとの区切り**
   - 4月度 合計
   - 5月度 合計
   - などの月次合計行がある

2. **取引の表示**
   - 取引日順に表示
   - 相手勘定科目が表示される
   - 摘要（取引内容）が表示される
   - 借方金額または貸方金額のいずれかが表示される
   - 各取引後の残高が表示される

3. **残高の計算**
   - 売上高は収益科目なので、貸方がプラス
   - 残高は累積で計算される

4. **複合仕訳の表示**
   - 1つの取引に複数の相手勘定科目がある場合、複数行で表示
   - 例: 2021/04/25の売掛金の取引は、「愛知マート」と「国電デパート」の2行で表示

## 実装方針

1. **勘定科目選択**: ドロップダウンで勘定科目を選択
2. **期間選択**: 会計期間を選択
3. **データ取得**: GeneralLedgerから選択された勘定科目に関連する仕訳を取得
4. **残高計算**: 期首残高を計算し、各取引後の残高を計算
5. **月次合計**: 月ごとに合計行を表示
6. **相手勘定科目の表示**: 借方または貸方の相手勘定科目を表示

## データ構造

```python
{
    'account_item': '売上高',
    'fiscal_period': '令和3年度 (2021/04/01 ~ 2022/03/31)',
    'opening_balance': 0,
    'transactions': [
        {
            'date': '2021/04/05',
            'counterpart_account': '売掛金',
            'summary': '11日～5日分',
            'debit': 0,
            'credit': 265750,
            'balance': 265750
        },
        # ...
    ],
    'monthly_totals': [
        {
            'month': '4月度',
            'debit_total': 0,
            'credit_total': 7747900,
            'balance': 7747900
        },
        # ...
    ]
}
```
